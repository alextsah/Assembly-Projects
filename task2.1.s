.global _start
.equ TIMERLOAD, 0xFFFEC600
.equ TIMERCOUNTER, 0xFFFEC604
.equ TIMERCONTROL, 0xFFFEC608
.equ TIMERINTERUP, 0xFFFEC60C

_start:
	MOV R1,#0xf
	MOV R2,#0b11111111111111111111110100000011
	BL ARM_TIM_config_ASM
	BL ARM_TIM_clear_INT_ASM
	BL ARM_TIM_read_INT_ASM
	B end 

ARM_TIM_config_ASM:
	PUSH {R3-R12}
	LDR R3,=TIMERLOAD
	STR R1,[R3]
	LDR R4,=TIMERCONTROL
	STR R2,[R4]
	POP {R3-R12}
	BX LR
	
ARM_TIM_read_INT_ASM:
	LDR R2,=TIMERINTERUP
	LDR R3,[R2]
	BX LR
	
ARM_TIM_clear_INT_ASM:
	PUSH {R2-R12}
	MOV R2,#0x00000001
	LDR R3,=TIMERINTERUP
	STR R2,[R3]
	POP {R2-R12}
	BX LR 
	
end:
	B end 
	.end
